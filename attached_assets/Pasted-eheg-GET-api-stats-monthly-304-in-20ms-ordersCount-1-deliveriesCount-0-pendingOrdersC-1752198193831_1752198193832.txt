eheg] <-- GET /api/stats/monthly 304 in 20ms :: {"ordersCount":1,"deliveriesCount":0,"pendingOrdersCount":1,"averageDeliveryTime":0,"totalPalettes"â€¦

ðŸ” Groups API called, user ID: admin_local

ðŸ” Current user found: { id: 'admin_local', role: 'admin' }

âœ… User is admin, fetching all groups...

âœ… Groups fetched for admin, count: 4

[xu305l] <-- GET /api/groups 304 in 29ms :: [{"id":1,"name":"Frouard","color":"#1976D2","created_at":"2025-07-11T01:31:55.308Z","updated_at":"2â€¦

[91avo] <-- GET /api/deliveries 304 in 61ms :: []

[wi36kj] <-- GET /api/orders 304 in 64ms :: [{"id":1,"supplierId":1,"groupId":1,"plannedDate":"2025-07-02","status":"pending","notes":null,"creâ€¦

[s6f71e] --> GET /api/suppliers

[s6f71e]     Host: logiflow.ffnancy.fr

[s6f71e]     IP: 172.20.0.8

[s6f71e]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[s13zfd] --> GET /api/orders

[s13zfd]     Host: logiflow.ffnancy.fr

[s13zfd]     IP: 172.20.0.8

[s13zfd]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[s6f71e] <-- GET /api/suppliers 304 in 7ms :: [{"id":1,"name":"Fournisseur Test","contact":"Contact Principal","phone":"03.83.00.00.00","created_â€¦

[s13zfd] <-- GET /api/orders 304 in 12ms :: [{"id":1,"supplierId":1,"groupId":1,"plannedDate":"2025-07-02","status":"pending","notes":null,"creâ€¦

[zrza56] --> POST /api/deliveries

[zrza56]     Host: logiflow.ffnancy.fr

[zrza56]     IP: 172.20.0.8

[zrza56]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

Error creating delivery: error: new row for relation "deliveries" violates check constraint "deliveries_status_check"

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async DatabaseStorage.createDelivery (file:///app/dist/index.js:5583:24)

    at async file:///app/dist/index.js:6158:24 {

  length: 359,

  severity: 'ERROR',

  code: '23514',

  detail: 'Failing row contains (4, 1, 1, 1, 2025-07-09, 1, palettes, planned, null, null, null, null, null, f, admin_local, 2025-07-11 01:43:02.477, 2025-07-11 01:43:02.477).',

  hint: undefined,

  position: undefined,

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: 'public',

  table: 'deliveries',

  column: undefined,

  dataType: undefined,

  constraint: 'deliveries_status_check',

  file: 'execMain.c',

  line: '2023',

  routine: 'ExecConstraints'

}

[zrza56] ERROR Response: 500 Internal Server Error

[zrza56] <-- POST /api/deliveries 500 in 18ms :: {"message":"Failed to create delivery"}


      
      
    