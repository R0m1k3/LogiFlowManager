ff]     IP: 172.20.0.8

[zewff]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[ymwrnp] --> GET /api/groups

[ymwrnp]     Host: logiflow.ffnancy.fr

[ymwrnp]     IP: 172.20.0.8

[ymwrnp]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[lzjb2j] <-- GET /api/stats/monthly 200 in 34ms :: {"ordersCount":0,"deliveriesCount":0,"pendingOrdersCount":0,"averageDeliveryTime":0,"totalPalettes"…

🔍 Groups API called, user ID: admin_local

[9t3ko] <-- GET /api/orders 200 in 95ms :: []

🔍 Current user found: { id: 'admin_local', role: 'admin' }

✅ User is admin, fetching all groups...

✅ Groups fetched for admin, count: 3

[ymwrnp] <-- GET /api/groups 200 in 104ms :: [{"id":1,"name":"Frouard","color":"#1976D2","created_at":"2025-07-11T01:52:05.138Z","updated_at":"2…

[zewff] <-- GET /api/deliveries 304 in 118ms :: []

[6xqkv] --> GET /api/suppliers

[6xqkv]     Host: logiflow.ffnancy.fr

[6xqkv]     IP: 172.20.0.8

[6xqkv]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[7dhqzi] --> GET /api/orders

[7dhqzi]     Host: logiflow.ffnancy.fr

[7dhqzi]     IP: 172.20.0.8

[7dhqzi]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

[6xqkv] <-- GET /api/suppliers 200 in 14ms :: [{"id":1,"name":"Fournisseur Test","contact":"Contact Principal","phone":"03.83.00.00.00","created_…

[7dhqzi] <-- GET /api/orders 200 in 15ms :: []

[4sgwx7] --> POST /api/deliveries

[4sgwx7]     Host: logiflow.ffnancy.fr

[4sgwx7]     IP: 172.20.0.8

[4sgwx7]     Headers: {"x-forwarded-for":"82.65.11.128","x-real-ip":"82.65.11.128","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb"}

Error creating delivery: error: new row for relation "deliveries" violates check constraint "deliveries_status_check"

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async DatabaseStorage.createDelivery (file:///app/dist/index.js:5583:24)

    at async file:///app/dist/index.js:6158:24 {

  length: 362,

  severity: 'ERROR',

  code: '23514',

  detail: 'Failing row contains (1, null, 1, 1, 2025-07-03, 1, palettes, planned, null, null, null, null, null, f, admin_local, 2025-07-11 01:52:24.553, 2025-07-11 01:52:24.553).',

  hint: undefined,

  position: undefined,

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: 'public',

  table: 'deliveries',

  column: undefined,

  dataType: undefined,

  constraint: 'deliveries_status_check',

  file: 'execMain.c',

  line: '2023',

  routine: 'ExecConstraints'

}

[4sgwx7] <-- POST /api/deliveries 500 in 15ms :: {"message":"Failed to create delivery"}

[4sgwx7] ERROR Response: 500 Internal Server Error


      
      
    